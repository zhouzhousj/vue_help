import"./el-popper-ce6f60b6.js";import{b as m,E as c,d as b,e as f,f as D,g as x,h as C,c as V,i as y}from"./cms_help-67787740.js";import{_ as E,o as I,e as S,I as i,M as l,O as z,w as o,K as P}from"./index-605b105c.js";const T={data(){return{json:{current:1,size:99},searchText:"",currentPage:1,pageSize:6,total:0,tableData:[],isVisible:!1,editItem:{}}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,a=e+this.pageSize;return this.filteredtableData.slice(e,a)},filteredtableData(){return this.searchText&&this.tableData&&this.tableData.length>0?this.tableData.filter(e=>String(e.title).includes(String(this.searchText))):this.tableData||[]}},methods:{handlePageChange(e){this.currentPage=e},fetchData(){m.Page(this.json).then(e=>{this.tableData=e.data.data.page.records||e.data.records,console.log(this.tableData),c.success("刷新成功！")}).catch(e=>{c.error("刷新失败，请检查网络！"),console.error("Error fetching data:",e)})},openDialog(e){this.editItem={...e},this.isVisible=!0}},created(){this.fetchData()}},v={class:"root"},k={style:{display:"flex"}},w=i("span",null,"详情",-1);function B(e,a,K,j,t,s){const d=b,r=C,u=V,p=f,g=D,h=y,_=x;return I(),S("div",v,[i("div",k,[l(d,{modelValue:t.searchText,"onUpdate:modelValue":a[0]||(a[0]=n=>t.searchText=n),placeholder:"请输入搜索关键字",clearable:"",onClear:e.clearSearch,onKeyup:z(e.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"])]),l(p,{data:s.paginatedData,"header-cell-style":{backgroud:"#2b4490",color:"#606266"},borde:""},{default:o(()=>[l(r,{prop:"title",label:"标题"}),l(r,{width:"200rpx",label:"操作"},{default:o(({row:n})=>[l(u,{type:"primary",size:"mini",onClick:q=>s.openDialog(n)},{default:o(()=>[w]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{"current-page":t.currentPage,"page-size":t.pageSize,total:s.filteredtableData.length,onCurrentChange:s.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),l(_,{class:"form",modelValue:t.isVisible,"onUpdate:modelValue":a[1]||(a[1]=n=>t.isVisible=n),onClose:a[2]||(a[2]=n=>t.isVisible=!1),title:t.editItem.title},{default:o(()=>[i("span",null,P(t.editItem.content),1),l(h,{src:t.editItem.icon},null,8,["src"])]),_:1},8,["modelValue","title"])])}const O=E(T,[["render",B]]);export{O as default};
